#include "header.h"

double mapping_func_kernel(
 double x,
 double min,
 double max
)

{

 static int mapping_table_10_45_8_133[] = {
    0,   0,   0,   0,   0,   0,   0,   1,   1,   1,
    2,   2,   2,   2,   2,   3,   3,   3,   3,   3,
    4,   4,   4,   4,   4,   4,   5,   5,   5,   5,
    5,   6,   6,   6,   6,   7,   7,   7,   7,   7,
    8,   8,   8,   8,   9,   9,   9,   9,  10,  10,
   10,  10,  11,  11,  12,  12,  12,  12,  13,  13,
   14,  14,  14,  15,  15,  15,  16,  16,  17,  17,
   17,  18,  18,  19,  19,  19,  20,  20,  21,  22,
   22,  23,  23,  24,  24,  25,  25,  26,  27,  27,
   28,  29,  29,  30,  31,  31,  32,  32,  33,  34,
   35,  36,  37,  38,  40,  41,  43,  44,  45,  46,
   47,  48,  49,  49,  50,  51,  52,  53,  55,  56,
   59,  61,  63,  64,  65,  66,  67,  68,  69,  69,
   70,  71,  73,  74,  76,  78,  82,  86,  91,  94,
   96,  97,  98,  99, 101, 102, 103, 104, 107, 110,
  114, 118, 121, 123, 129, 135, 139, 141, 143, 150,
  157, 162, 166, 170, 173, 174, 176, 177, 182, 190,
  198, 205, 207, 209, 211, 213, 222, 233, 240, 246,
  250, 250, 250, 251, 251, 251, 251, 251, 252, 252,
  252, 252, 252, 252, 253, 253, 253, 253, 253, 253,
  253, 253, 254, 254, 254, 254, 254, 254, 254, 254,
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
  255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
  255, 255, 255, 255, 255, 255
 };
 double range;
 double t;
 int index;

 if(x < 0) x = 0;
 if(x > 1) x = 1;
 range = max - min;
 t = x;

 index = (int)round(x * 255.0);
 if ( index < 0 )
  index= 0;
 if ( index > 255 )
  index= 255;
 t = ((double)mapping_table_10_45_8_133[index]) / 255.0;

 return t * range + min;

}
